{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\venen alex\\\\OneDrive\\\\Desktop\\\\Project_Repos\\\\Personalized-Memory-Assistant\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Send, Mic, Youtube, Sparkles, Menu, Plus, Trash2, MessageSquare, Home, Upload } from 'lucide-react';\nimport axios from 'axios';\nimport HomePage from './HomePage';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = 'http://localhost:8000';\nexport default function App() {\n  _s();\n  var _sessions$find;\n  const [showHomePage, setShowHomePage] = useState(true);\n  const [sessions, setSessions] = useState([]);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [isListening, setIsListening] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [loadingMessage, setLoadingMessage] = useState('');\n  const messagesEndRef = useRef(null);\n  const messagesContainerRef = useRef(null);\n  const recognitionRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Initialize Web Speech API\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'en-US';\n      recognition.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setInput(transcript);\n        setIsListening(false);\n      };\n      recognition.onerror = () => {\n        setIsListening(false);\n      };\n      recognition.onend = () => {\n        setIsListening(false);\n      };\n      recognitionRef.current = recognition;\n    }\n  }, []);\n\n  // Load sessions on mount\n  useEffect(() => {\n    if (!showHomePage) {\n      loadSessions();\n    }\n  }, [showHomePage]);\n\n  // Load messages when session changes - THIS WAS MISSING!\n  useEffect(() => {\n    if (currentSessionId) {\n      loadSession(currentSessionId);\n    }\n  }, [currentSessionId]);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'end'\n      });\n    }\n  }, [messages]);\n  const loadSessions = async () => {\n    try {\n      const response = await axios.get(`${API_BASE}/api/sessions`);\n      setSessions(response.data);\n      if (!currentSessionId && response.data.length > 0) {\n        setCurrentSessionId(response.data[0].session_id);\n      }\n    } catch (error) {\n      console.error('Error loading sessions:', error);\n    }\n  };\n  const loadSession = async sessionId => {\n    try {\n      const response = await axios.get(`${API_BASE}/api/session/${sessionId}`);\n      setMessages(response.data.messages || []);\n      setTimeout(() => {\n        if (messagesContainerRef.current) {\n          messagesContainerRef.current.scrollTop = messagesContainerRef.current.scrollHeight;\n        }\n      }, 100);\n    } catch (error) {\n      console.error('Error loading session:', error);\n    }\n  };\n  const createNewSession = async () => {\n    try {\n      const response = await axios.post(`${API_BASE}/api/session/new`);\n      const newSessionId = response.data.session_id;\n      await loadSessions();\n      setCurrentSessionId(newSessionId);\n      setMessages([]);\n    } catch (error) {\n      console.error('Error creating session:', error);\n    }\n  };\n  const deleteSession = async (sessionId, e) => {\n    e.stopPropagation();\n    try {\n      await axios.delete(`${API_BASE}/api/session/${sessionId}`);\n      await loadSessions();\n      if (currentSessionId === sessionId) {\n        setCurrentSessionId(null);\n        setMessages([]);\n      }\n    } catch (error) {\n      console.error('Error deleting session:', error);\n    }\n  };\n  const sendMessage = async (messageText = input) => {\n    if (!messageText.trim() || loading) return;\n    if (!currentSessionId) {\n      await createNewSession();\n      await new Promise(resolve => setTimeout(resolve, 500));\n    }\n    const userMessage = {\n      role: 'user',\n      content: messageText\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setLoading(true);\n    setLoadingMessage('Sending message...');\n    try {\n      const response = await axios.post(`${API_BASE}/api/chat`, {\n        message: messageText,\n        session_id: currentSessionId\n      });\n      const assistantMessage = {\n        role: 'assistant',\n        content: response.data.reply\n      };\n      setMessages(prev => [...prev, assistantMessage]);\n      await loadSessions();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error sending message:', error);\n      let errorDetail = 'Sorry, I encountered an error. Please check if the backend is running and your API key is valid.';\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.detail) {\n        errorDetail = `Error: ${error.response.data.detail}`;\n      } else if (error.message) {\n        errorDetail = `Error: ${error.message}`;\n      }\n      const errorMessage = {\n        role: 'assistant',\n        content: errorDetail\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n      setLoadingMessage('');\n    }\n  };\n  const handleYoutubeSummary = async () => {\n    const url = prompt('Enter YouTube video URL:');\n    if (!url) return;\n    if (!currentSessionId) {\n      await createNewSession();\n      await new Promise(resolve => setTimeout(resolve, 500));\n    }\n    const userMessage = {\n      role: 'user',\n      content: `Summarize: ${url}`\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setLoading(true);\n    setLoadingMessage('Summarizing YouTube video...');\n    try {\n      const response = await axios.post(`${API_BASE}/api/summarize`, {\n        url,\n        session_id: currentSessionId\n      });\n      const summaryMessage = {\n        role: 'assistant',\n        content: response.data.summary\n      };\n      setMessages(prev => [...prev, summaryMessage]);\n      await loadSessions();\n    } catch (error) {\n      console.error('Error summarizing video:', error);\n      const errorMessage = {\n        role: 'assistant',\n        content: 'Sorry, I could not summarize the video. Make sure it has English captions.'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n      setLoadingMessage('');\n    }\n  };\n  const startVoiceInput = () => {\n    if (recognitionRef.current && !isListening) {\n      setIsListening(true);\n      recognitionRef.current.start();\n    }\n  };\n  const handleFileUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!currentSessionId) {\n      await createNewSession();\n      await new Promise(resolve => setTimeout(resolve, 500));\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('session_id', currentSessionId);\n    setLoading(true);\n    setUploadProgress(0);\n    setLoadingMessage(`Uploading ${file.name}...`);\n    try {\n      const response = await axios.post(`${API_BASE}/api/upload`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: progressEvent => {\n          const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setUploadProgress(percentCompleted);\n          setLoadingMessage(`Uploading... ${percentCompleted}%`);\n        }\n      });\n      if (response.data.success) {\n        // Add user message about file upload\n        const uploadMessage = {\n          role: 'user',\n          content: `Uploaded: ${file.name}`\n        };\n        setMessages(prev => [...prev, uploadMessage]);\n\n        // Add AI response with summary\n        const aiMessage = {\n          role: 'assistant',\n          content: response.data.message\n        };\n        setMessages(prev => [...prev, aiMessage]);\n        await loadSessions();\n      } else {\n        // Handle error response from server\n        const errorMessage = {\n          role: 'assistant',\n          content: response.data.message || 'Error processing file'\n        };\n        setMessages(prev => [...prev, errorMessage]);\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Error uploading file:', error);\n      let errorDetail = 'Failed to upload file. Please try again.';\n      if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.detail) {\n        errorDetail = `Error: ${error.response.data.detail}`;\n      } else if (error.message) {\n        errorDetail = `Error: ${error.message}`;\n      }\n      const errorMessage = {\n        role: 'assistant',\n        content: errorDetail\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n      setUploadProgress(0);\n      setLoadingMessage('');\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    sendMessage();\n  };\n  if (showHomePage) {\n    return /*#__PURE__*/_jsxDEV(HomePage, {\n      onEnterChat: () => setShowHomePage(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: sidebarOpen && /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"sidebar\",\n        initial: {\n          x: -300\n        },\n        animate: {\n          x: 0\n        },\n        exit: {\n          x: -300\n        },\n        transition: {\n          type: 'spring',\n          stiffness: 300,\n          damping: 30\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"sidebar-title\",\n            children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this), \"Memory Assistant\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"new-chat-btn\",\n            onClick: createNewSession,\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this), \"New Chat\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-home-btn\",\n            onClick: () => setShowHomePage(true),\n            children: [/*#__PURE__*/_jsxDEV(Home, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 17\n            }, this), \"Back to Home\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sessions-list\",\n          children: sessions.map(session => /*#__PURE__*/_jsxDEV(motion.div, {\n            className: `session-item ${currentSessionId === session.session_id ? 'active' : ''}`,\n            onClick: () => setCurrentSessionId(session.session_id),\n            whileHover: {\n              scale: 1.02\n            },\n            whileTap: {\n              scale: 0.98\n            },\n            children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"session-title\",\n              children: session.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"delete-session-btn\",\n              onClick: e => deleteSession(session.session_id, e),\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 19\n            }, this)]\n          }, session.session_id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"menu-btn\",\n          onClick: () => setSidebarOpen(!sidebarOpen),\n          children: /*#__PURE__*/_jsxDEV(Menu, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"chat-title\",\n          children: ((_sessions$find = sessions.find(s => s.session_id === currentSessionId)) === null || _sessions$find === void 0 ? void 0 : _sessions$find.title) || 'New Chat'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-container\",\n        ref: messagesContainerRef,\n        children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n            size: 64,\n            className: \"empty-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Start a Conversation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ask me anything, summarize YouTube videos, or use voice input!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(motion.div, {\n            className: `message ${msg.role}`,\n            initial: {\n              opacity: 0,\n              y: 20\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            transition: {\n              duration: 0.3\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-avatar\",\n                children: msg.role === 'user' ? 'ðŸ‘¤' : 'ðŸ¤–'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-text\",\n                children: msg.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 19\n            }, this)\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this), loading && /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"message assistant loading\",\n          initial: {\n            opacity: 0\n          },\n          animate: {\n            opacity: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-avatar\",\n              children: \"\\uD83E\\uDD16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"typing-indicator\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-message\",\n              children: loadingMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"input-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"icon-btn youtube-btn\",\n            onClick: handleYoutubeSummary,\n            title: \"Summarize YouTube Video\",\n            children: /*#__PURE__*/_jsxDEV(Youtube, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `icon-btn mic-btn ${isListening ? 'listening' : ''}`,\n            onClick: startVoiceInput,\n            title: \"Voice Input\",\n            children: /*#__PURE__*/_jsxDEV(Mic, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            ref: fileInputRef,\n            style: {\n              display: 'none'\n            },\n            onChange: handleFileUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"icon-btn upload-btn\",\n            onClick: () => fileInputRef.current.click(),\n            title: \"Upload File\",\n            children: /*#__PURE__*/_jsxDEV(Upload, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"message-input\",\n            placeholder: \"Type your message...\",\n            value: input,\n            onChange: e => setInput(e.target.value),\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"send-btn\",\n            disabled: !input.trim() || loading,\n            children: /*#__PURE__*/_jsxDEV(Send, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"0LNUvSNtlHrJTIa+Phb95mRO7Ow=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","motion","AnimatePresence","Send","Mic","Youtube","Sparkles","Menu","Plus","Trash2","MessageSquare","Home","Upload","axios","HomePage","jsxDEV","_jsxDEV","API_BASE","App","_s","_sessions$find","showHomePage","setShowHomePage","sessions","setSessions","currentSessionId","setCurrentSessionId","messages","setMessages","input","setInput","loading","setLoading","sidebarOpen","setSidebarOpen","isListening","setIsListening","uploadProgress","setUploadProgress","loadingMessage","setLoadingMessage","messagesEndRef","messagesContainerRef","recognitionRef","fileInputRef","window","recognition","webkitSpeechRecognition","continuous","interimResults","lang","onresult","event","transcript","results","onerror","onend","current","loadSessions","loadSession","scrollIntoView","behavior","block","response","get","data","length","session_id","error","console","sessionId","setTimeout","scrollTop","scrollHeight","createNewSession","post","newSessionId","deleteSession","e","stopPropagation","delete","sendMessage","messageText","trim","Promise","resolve","userMessage","role","content","prev","message","assistantMessage","reply","_error$response","_error$response$data","errorDetail","detail","errorMessage","handleYoutubeSummary","url","prompt","summaryMessage","summary","startVoiceInput","start","handleFileUpload","file","target","files","formData","FormData","append","name","headers","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","success","uploadMessage","aiMessage","_error$response2","_error$response2$data","value","handleSubmit","preventDefault","onEnterChat","fileName","_jsxFileName","lineNumber","columnNumber","className","children","div","initial","x","animate","exit","transition","type","stiffness","damping","size","onClick","map","session","whileHover","scale","whileTap","title","find","s","ref","msg","idx","opacity","y","duration","onSubmit","style","display","onChange","click","placeholder","disabled","_c","$RefreshReg$"],"sources":["C:/Users/venen alex/OneDrive/Desktop/Project_Repos/Personalized-Memory-Assistant/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Send, Mic, Youtube, Sparkles, Menu, Plus, Trash2, MessageSquare, Home, Upload } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport HomePage from './HomePage';\r\nimport './App.css';\r\n\r\nconst API_BASE = 'http://localhost:8000';\r\n\r\nexport default function App() {\r\n  const [showHomePage, setShowHomePage] = useState(true);\r\n  const [sessions, setSessions] = useState([]);\r\n  const [currentSessionId, setCurrentSessionId] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [loadingMessage, setLoadingMessage] = useState('');\r\n  const messagesEndRef = useRef(null);\r\n  const messagesContainerRef = useRef(null);\r\n  const recognitionRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Initialize Web Speech API\r\n  useEffect(() => {\r\n    if ('webkitSpeechRecognition' in window) {\r\n      const recognition = new window.webkitSpeechRecognition();\r\n      recognition.continuous = false;\r\n      recognition.interimResults = false;\r\n      recognition.lang = 'en-US';\r\n\r\n      recognition.onresult = (event) => {\r\n        const transcript = event.results[0][0].transcript;\r\n        setInput(transcript);\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognition.onerror = () => {\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognition.onend = () => {\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognitionRef.current = recognition;\r\n    }\r\n  }, []);\r\n\r\n  // Load sessions on mount\r\n  useEffect(() => {\r\n    if (!showHomePage) {\r\n      loadSessions();\r\n    }\r\n  }, [showHomePage]);\r\n\r\n  // Load messages when session changes - THIS WAS MISSING!\r\n  useEffect(() => {\r\n    if (currentSessionId) {\r\n      loadSession(currentSessionId);\r\n    }\r\n  }, [currentSessionId]);\r\n\r\n  // Auto-scroll to bottom when messages change\r\n  useEffect(() => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth', block: 'end' });\r\n    }\r\n  }, [messages]);\r\n\r\n  const loadSessions = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/api/sessions`);\r\n      setSessions(response.data);\r\n      if (!currentSessionId && response.data.length > 0) {\r\n        setCurrentSessionId(response.data[0].session_id);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading sessions:', error);\r\n    }\r\n  };\r\n\r\n  const loadSession = async (sessionId) => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/api/session/${sessionId}`);\r\n      setMessages(response.data.messages || []);\r\n      setTimeout(() => {\r\n        if (messagesContainerRef.current) {\r\n          messagesContainerRef.current.scrollTop = messagesContainerRef.current.scrollHeight;\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error('Error loading session:', error);\r\n    }\r\n  };\r\n\r\n  const createNewSession = async () => {\r\n    try {\r\n      const response = await axios.post(`${API_BASE}/api/session/new`);\r\n      const newSessionId = response.data.session_id;\r\n      await loadSessions();\r\n      setCurrentSessionId(newSessionId);\r\n      setMessages([]);\r\n    } catch (error) {\r\n      console.error('Error creating session:', error);\r\n    }\r\n  };\r\n\r\n  const deleteSession = async (sessionId, e) => {\r\n    e.stopPropagation();\r\n    try {\r\n      await axios.delete(`${API_BASE}/api/session/${sessionId}`);\r\n      await loadSessions();\r\n      if (currentSessionId === sessionId) {\r\n        setCurrentSessionId(null);\r\n        setMessages([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting session:', error);\r\n    }\r\n  };\r\n\r\n  const sendMessage = async (messageText = input) => {\r\n    if (!messageText.trim() || loading) return;\r\n\r\n    if (!currentSessionId) {\r\n      await createNewSession();\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n\r\n    const userMessage = { role: 'user', content: messageText };\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInput('');\r\n    setLoading(true);\r\n    setLoadingMessage('Sending message...');\r\n\r\n    try {\r\n      const response = await axios.post(`${API_BASE}/api/chat`, {\r\n        message: messageText,\r\n        session_id: currentSessionId\r\n      });\r\n\r\n      const assistantMessage = { role: 'assistant', content: response.data.reply };\r\n      setMessages(prev => [...prev, assistantMessage]);\r\n      await loadSessions();\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n\r\n      let errorDetail = 'Sorry, I encountered an error. Please check if the backend is running and your API key is valid.';\r\n      if (error.response?.data?.detail) {\r\n        errorDetail = `Error: ${error.response.data.detail}`;\r\n      } else if (error.message) {\r\n        errorDetail = `Error: ${error.message}`;\r\n      }\r\n\r\n      const errorMessage = { \r\n        role: 'assistant', \r\n        content: errorDetail\r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setLoading(false);\r\n      setLoadingMessage('');\r\n    }\r\n  };\r\n\r\n  const handleYoutubeSummary = async () => {\r\n    const url = prompt('Enter YouTube video URL:');\r\n    if (!url) return;\r\n\r\n    if (!currentSessionId) {\r\n      await createNewSession();\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n\r\n    const userMessage = { role: 'user', content: `Summarize: ${url}` };\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setLoading(true);\r\n    setLoadingMessage('Summarizing YouTube video...');\r\n\r\n    try {\r\n      const response = await axios.post(`${API_BASE}/api/summarize`, {\r\n        url,\r\n        session_id: currentSessionId\r\n      });\r\n\r\n      const summaryMessage = { role: 'assistant', content: response.data.summary };\r\n      setMessages(prev => [...prev, summaryMessage]);\r\n      await loadSessions();\r\n    } catch (error) {\r\n      console.error('Error summarizing video:', error);\r\n      const errorMessage = { \r\n        role: 'assistant', \r\n        content: 'Sorry, I could not summarize the video. Make sure it has English captions.' \r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setLoading(false);\r\n      setLoadingMessage('');\r\n    }\r\n  };\r\n\r\n  const startVoiceInput = () => {\r\n    if (recognitionRef.current && !isListening) {\r\n      setIsListening(true);\r\n      recognitionRef.current.start();\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (!currentSessionId) {\r\n      await createNewSession();\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('session_id', currentSessionId);\r\n\r\n    setLoading(true);\r\n    setUploadProgress(0);\r\n    setLoadingMessage(`Uploading ${file.name}...`);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_BASE}/api/upload`, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        },\r\n        onUploadProgress: (progressEvent) => {\r\n          const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n          setUploadProgress(percentCompleted);\r\n          setLoadingMessage(`Uploading... ${percentCompleted}%`);\r\n        }\r\n      });\r\n\r\n      if (response.data.success) {\r\n        // Add user message about file upload\r\n        const uploadMessage = { \r\n          role: 'user', \r\n          content: `Uploaded: ${file.name}` \r\n        };\r\n        setMessages(prev => [...prev, uploadMessage]);\r\n\r\n        // Add AI response with summary\r\n        const aiMessage = { \r\n          role: 'assistant', \r\n          content: response.data.message \r\n        };\r\n        setMessages(prev => [...prev, aiMessage]);\r\n        \r\n        await loadSessions();\r\n      } else {\r\n        // Handle error response from server\r\n        const errorMessage = { \r\n          role: 'assistant', \r\n          content: response.data.message || 'Error processing file' \r\n        };\r\n        setMessages(prev => [...prev, errorMessage]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading file:', error);\r\n      \r\n      let errorDetail = 'Failed to upload file. Please try again.';\r\n      if (error.response?.data?.detail) {\r\n        errorDetail = `Error: ${error.response.data.detail}`;\r\n      } else if (error.message) {\r\n        errorDetail = `Error: ${error.message}`;\r\n      }\r\n\r\n      const errorMessage = { \r\n        role: 'assistant', \r\n        content: errorDetail\r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setLoading(false);\r\n      setUploadProgress(0);\r\n      setLoadingMessage('');\r\n      // Reset file input\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    sendMessage();\r\n  };\r\n\r\n  if (showHomePage) {\r\n    return <HomePage onEnterChat={() => setShowHomePage(false)} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      {/* Sidebar */}\r\n      <AnimatePresence>\r\n        {sidebarOpen && (\r\n          <motion.div\r\n            className=\"sidebar\"\r\n            initial={{ x: -300 }}\r\n            animate={{ x: 0 }}\r\n            exit={{ x: -300 }}\r\n            transition={{ type: 'spring', stiffness: 300, damping: 30 }}\r\n          >\r\n            <div className=\"sidebar-header\">\r\n              <h1 className=\"sidebar-title\">\r\n                <Sparkles size={24} />\r\n                Memory Assistant\r\n              </h1>\r\n              <button className=\"new-chat-btn\" onClick={createNewSession}>\r\n                <Plus size={20} />\r\n                New Chat\r\n              </button>\r\n              <button className=\"back-home-btn\" onClick={() => setShowHomePage(true)}>\r\n                <Home size={20} />\r\n                Back to Home\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"sessions-list\">\r\n              {sessions.map((session) => (\r\n                <motion.div\r\n                  key={session.session_id}\r\n                  className={`session-item ${currentSessionId === session.session_id ? 'active' : ''}`}\r\n                  onClick={() => setCurrentSessionId(session.session_id)}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  <MessageSquare size={16} />\r\n                  <span className=\"session-title\">{session.title}</span>\r\n                  <button\r\n                    className=\"delete-session-btn\"\r\n                    onClick={(e) => deleteSession(session.session_id, e)}\r\n                  >\r\n                    <Trash2 size={14} />\r\n                  </button>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Main Chat Area */}\r\n      <div className=\"main-content\">\r\n        <div className=\"chat-header\">\r\n          <button className=\"menu-btn\" onClick={() => setSidebarOpen(!sidebarOpen)}>\r\n            <Menu size={24} />\r\n          </button>\r\n          <h2 className=\"chat-title\">\r\n            {sessions.find(s => s.session_id === currentSessionId)?.title || 'New Chat'}\r\n          </h2>\r\n        </div>\r\n\r\n        <div className=\"messages-container\" ref={messagesContainerRef}>\r\n          {messages.length === 0 ? (\r\n            <div className=\"empty-state\">\r\n              <Sparkles size={64} className=\"empty-icon\" />\r\n              <h2>Start a Conversation</h2>\r\n              <p>Ask me anything, summarize YouTube videos, or use voice input!</p>\r\n            </div>\r\n          ) : (\r\n            <AnimatePresence>\r\n              {messages.map((msg, idx) => (\r\n                <motion.div\r\n                  key={idx}\r\n                  className={`message ${msg.role}`}\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ duration: 0.3 }}\r\n                >\r\n                  <div className=\"message-content\">\r\n                    <div className=\"message-avatar\">\r\n                      {msg.role === 'user' ? 'ðŸ‘¤' : 'ðŸ¤–'}\r\n                    </div>\r\n                    <div className=\"message-text\">{msg.content}</div>\r\n                  </div>\r\n                </motion.div>\r\n              ))}\r\n            </AnimatePresence>\r\n          )}\r\n          \r\n          {loading && (\r\n            <motion.div\r\n              className=\"message assistant loading\"\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n            >\r\n              <div className=\"message-content\">\r\n                <div className=\"message-avatar\">ðŸ¤–</div>\r\n                <div className=\"typing-indicator\">\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n                <div className=\"loading-message\">{loadingMessage}</div>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n          \r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <div className=\"input-container\">\r\n          <form onSubmit={handleSubmit} className=\"input-form\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"icon-btn youtube-btn\"\r\n              onClick={handleYoutubeSummary}\r\n              title=\"Summarize YouTube Video\"\r\n            >\r\n              <Youtube size={20} />\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className={`icon-btn mic-btn ${isListening ? 'listening' : ''}`}\r\n              onClick={startVoiceInput}\r\n              title=\"Voice Input\"\r\n            >\r\n              <Mic size={20} />\r\n            </button>\r\n\r\n            <input\r\n              type=\"file\"\r\n              ref={fileInputRef}\r\n              style={{ display: 'none' }}\r\n              onChange={handleFileUpload}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              className=\"icon-btn upload-btn\"\r\n              onClick={() => fileInputRef.current.click()}\r\n              title=\"Upload File\"\r\n            >\r\n              <Upload size={20} />\r\n            </button>\r\n\r\n            <input\r\n              type=\"text\"\r\n              className=\"message-input\"\r\n              placeholder=\"Type your message...\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              disabled={loading}\r\n            />\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"send-btn\"\r\n              disabled={!input.trim() || loading}\r\n            >\r\n              <Send size={20} />\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}